<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A `StatefulWidget` is a widget that can take advantage of some local state to remember things between two draw calls."><title>StatefulWidget in ratatui::widgets - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-84e720fa.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="ratatui" data-themes="" data-resource-suffix="" data-rustdoc-version="1.89.0-nightly (e703dff8f 2025-06-11)" data-channel="nightly" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../../static.files/storage-4e99c027.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-fd3af306.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-32bb7600.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/ratatui/ratatui/main/assets/favicon.ico"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../ratatui/index.html"><img src="https://raw.githubusercontent.com/ratatui/ratatui/main/assets/logo.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../ratatui/index.html"><img src="https://raw.githubusercontent.com/ratatui/ratatui/main/assets/logo.png" alt="logo"></a><h2><a href="../../ratatui/index.html">ratatui</a><span class="version">0.29.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Stateful<wbr>Widget</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#examples" title="Examples">Examples</a></li></ul><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.State" title="State">State</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.render" title="render">render</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In ratatui::<wbr>widgets</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">ratatui</a>::<wbr><a href="index.html">widgets</a></div><h1>Trait <span class="trait">StatefulWidget</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/ratatui/widgets.rs.html#237-245">Source</a> </span></div><pre class="rust item-decl"><code>pub trait StatefulWidget {
    type <a href="#associatedtype.State" class="associatedtype">State</a>;

    // Required method
    fn <a href="#tymethod.render" class="fn">render</a>(self, area: <a class="struct" href="../layout/struct.Rect.html" title="struct ratatui::layout::Rect">Rect</a>, buf: &amp;mut <a class="struct" href="../buffer/struct.Buffer.html" title="struct ratatui::buffer::Buffer">Buffer</a>, state: &amp;mut Self::<a class="associatedtype" href="trait.StatefulWidget.html#associatedtype.State" title="type ratatui::widgets::StatefulWidget::State">State</a>);
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A <code>StatefulWidget</code> is a widget that can take advantage of some local state to remember things
between two draw calls.</p>
<p>Most widgets can be drawn directly based on the input parameters. However, some features may
require some kind of associated state to be implemented.</p>
<p>For example, the <a href="struct.List.html" title="struct ratatui::widgets::List"><code>List</code></a> widget can highlight the item currently selected. This can be
translated in an offset, which is the number of elements to skip in order to have the selected
item within the viewport currently allocated to this widget. The widget can therefore only
provide the following behavior: whenever the selected item is out of the viewport scroll to a
predefined position (making the selected item the last viewable item or the one in the middle
for example). Nonetheless, if the widget has access to the last computed offset then it can
implement a natural scrolling experience where the last offset is reused until the selected
item is out of the viewport.</p>
<h3 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::io;

<span class="kw">use </span>ratatui::{
    backend::TestBackend,
    widgets::{List, ListItem, ListState, StatefulWidget, Widget},
    Terminal,
};

<span class="comment">// Let's say we have some events to display.
</span><span class="kw">struct </span>Events {
    <span class="comment">// `items` is the state managed by your application.
    </span>items: Vec&lt;String&gt;,
    <span class="comment">// `state` is the state that can be modified by the UI. It stores the index of the selected
    // item as well as the offset computed during the previous draw call (used to implement
    // natural scrolling).
    </span>state: ListState,
}

<span class="kw">impl </span>Events {
    <span class="kw">fn </span>new(items: Vec&lt;String&gt;) -&gt; Events {
        Events {
            items,
            state: ListState::default(),
        }
    }

    <span class="kw">pub fn </span>set_items(<span class="kw-2">&amp;mut </span><span class="self">self</span>, items: Vec&lt;String&gt;) {
        <span class="self">self</span>.items = items;
        <span class="comment">// We reset the state as the associated items have changed. This effectively reset
        // the selection as well as the stored offset.
        </span><span class="self">self</span>.state = ListState::default();
    }

    <span class="comment">// Select the next item. This will not be reflected until the widget is drawn in the
    // `Terminal::draw` callback using `Frame::render_stateful_widget`.
    </span><span class="kw">pub fn </span>next(<span class="kw-2">&amp;mut </span><span class="self">self</span>) {
        <span class="kw">let </span>i = <span class="kw">match </span><span class="self">self</span>.state.selected() {
            <span class="prelude-val">Some</span>(i) =&gt; {
                <span class="kw">if </span>i &gt;= <span class="self">self</span>.items.len() - <span class="number">1 </span>{
                    <span class="number">0
                </span>} <span class="kw">else </span>{
                    i + <span class="number">1
                </span>}
            }
            <span class="prelude-val">None </span>=&gt; <span class="number">0</span>,
        };
        <span class="self">self</span>.state.select(<span class="prelude-val">Some</span>(i));
    }

    <span class="comment">// Select the previous item. This will not be reflected until the widget is drawn in the
    // `Terminal::draw` callback using `Frame::render_stateful_widget`.
    </span><span class="kw">pub fn </span>previous(<span class="kw-2">&amp;mut </span><span class="self">self</span>) {
        <span class="kw">let </span>i = <span class="kw">match </span><span class="self">self</span>.state.selected() {
            <span class="prelude-val">Some</span>(i) =&gt; {
                <span class="kw">if </span>i == <span class="number">0 </span>{
                    <span class="self">self</span>.items.len() - <span class="number">1
                </span>} <span class="kw">else </span>{
                    i - <span class="number">1
                </span>}
            }
            <span class="prelude-val">None </span>=&gt; <span class="number">0</span>,
        };
        <span class="self">self</span>.state.select(<span class="prelude-val">Some</span>(i));
    }

    <span class="comment">// Unselect the currently selected item if any. The implementation of `ListState` makes
    // sure that the stored offset is also reset.
    </span><span class="kw">pub fn </span>unselect(<span class="kw-2">&amp;mut </span><span class="self">self</span>) {
        <span class="self">self</span>.state.select(<span class="prelude-val">None</span>);
    }
}


<span class="kw">let </span><span class="kw-2">mut </span>events = Events::new(<span class="macro">vec!</span>[String::from(<span class="string">"Item 1"</span>), String::from(<span class="string">"Item 2"</span>)]);

<span class="kw">loop </span>{
    terminal.draw(|f| {
        <span class="comment">// The items managed by the application are transformed to something
        // that is understood by ratatui.
        </span><span class="kw">let </span>items: Vec&lt;ListItem&gt; = events
            .items
            .iter()
            .map(|i| ListItem::new(i.as_str()))
            .collect();
        <span class="comment">// The `List` widget is then built with those items.
        </span><span class="kw">let </span>list = List::new(items);
        <span class="comment">// Finally the widget is rendered using the associated state. `events.state` is
        // effectively the only thing that we will "remember" from this draw call.
        </span>f.render_stateful_widget(list, f.size(), <span class="kw-2">&amp;mut </span>events.state);
    });

    <span class="comment">// In response to some input events or an external http request or whatever:
    </span>events.next();
}</code></pre></div>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.State" class="method"><a class="src rightside" href="../../src/ratatui/widgets.rs.html#241">Source</a><h4 class="code-header">type <a href="#associatedtype.State" class="associatedtype">State</a></h4></section></summary><div class="docblock"><p>State associated with the stateful widget.</p>
<p>If you don’t need this then you probably want to implement <a href="trait.Widget.html" title="trait ratatui::widgets::Widget"><code>Widget</code></a> instead.</p>
</div></details></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.render" class="method"><a class="src rightside" href="../../src/ratatui/widgets.rs.html#244">Source</a><h4 class="code-header">fn <a href="#tymethod.render" class="fn">render</a>(self, area: <a class="struct" href="../layout/struct.Rect.html" title="struct ratatui::layout::Rect">Rect</a>, buf: &amp;mut <a class="struct" href="../buffer/struct.Buffer.html" title="struct ratatui::buffer::Buffer">Buffer</a>, state: &amp;mut Self::<a class="associatedtype" href="trait.StatefulWidget.html#associatedtype.State" title="type ratatui::widgets::StatefulWidget::State">State</a>)</h4></section></summary><div class="docblock"><p>Draws the current state of the widget in the given buffer. That is the only method required
to implement a custom stateful widget.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-StatefulWidget-for-%26List%3C'_%3E" class="impl"><a class="src rightside" href="../../src/ratatui/widgets/list/rendering.rs.html#34-39">Source</a><a href="#impl-StatefulWidget-for-%26List%3C'_%3E" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.StatefulWidget.html" title="trait ratatui::widgets::StatefulWidget">StatefulWidget</a> for &amp;<a class="struct" href="struct.List.html" title="struct ratatui::widgets::List">List</a>&lt;'_&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.State-1" class="associatedtype trait-impl"><a class="src rightside" href="../../src/ratatui/widgets/list/rendering.rs.html#35">Source</a><a href="#associatedtype.State-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.State" class="associatedtype">State</a> = <a class="struct" href="struct.ListState.html" title="struct ratatui::widgets::ListState">ListState</a></h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-StatefulWidget-for-%26Table%3C'_%3E" class="impl"><a class="src rightside" href="../../src/ratatui/widgets/table/table.rs.html#772-777">Source</a><a href="#impl-StatefulWidget-for-%26Table%3C'_%3E" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.StatefulWidget.html" title="trait ratatui::widgets::StatefulWidget">StatefulWidget</a> for &amp;<a class="struct" href="struct.Table.html" title="struct ratatui::widgets::Table">Table</a>&lt;'_&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.State-2" class="associatedtype trait-impl"><a class="src rightside" href="../../src/ratatui/widgets/table/table.rs.html#773">Source</a><a href="#associatedtype.State-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.State" class="associatedtype">State</a> = <a class="struct" href="struct.TableState.html" title="struct ratatui::widgets::TableState">TableState</a></h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-StatefulWidget-for-List%3C'_%3E" class="impl"><a class="src rightside" href="../../src/ratatui/widgets/list/rendering.rs.html#25-31">Source</a><a href="#impl-StatefulWidget-for-List%3C'_%3E" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.StatefulWidget.html" title="trait ratatui::widgets::StatefulWidget">StatefulWidget</a> for <a class="struct" href="struct.List.html" title="struct ratatui::widgets::List">List</a>&lt;'_&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.State-3" class="associatedtype trait-impl"><a class="src rightside" href="../../src/ratatui/widgets/list/rendering.rs.html#26">Source</a><a href="#associatedtype.State-3" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.State" class="associatedtype">State</a> = <a class="struct" href="struct.ListState.html" title="struct ratatui::widgets::ListState">ListState</a></h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-StatefulWidget-for-Table%3C'_%3E" class="impl"><a class="src rightside" href="../../src/ratatui/widgets/table/table.rs.html#763-769">Source</a><a href="#impl-StatefulWidget-for-Table%3C'_%3E" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.StatefulWidget.html" title="trait ratatui::widgets::StatefulWidget">StatefulWidget</a> for <a class="struct" href="struct.Table.html" title="struct ratatui::widgets::Table">Table</a>&lt;'_&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.State-4" class="associatedtype trait-impl"><a class="src rightside" href="../../src/ratatui/widgets/table/table.rs.html#764">Source</a><a href="#associatedtype.State-4" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.State" class="associatedtype">State</a> = <a class="struct" href="struct.TableState.html" title="struct ratatui::widgets::TableState">TableState</a></h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-StatefulWidget-for-Scrollbar%3C'a%3E" class="impl"><a class="src rightside" href="../../src/ratatui/widgets/scrollbar.rs.html#499-517">Source</a><a href="#impl-StatefulWidget-for-Scrollbar%3C'a%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'a&gt; <a class="trait" href="trait.StatefulWidget.html" title="trait ratatui::widgets::StatefulWidget">StatefulWidget</a> for <a class="struct" href="struct.Scrollbar.html" title="struct ratatui::widgets::Scrollbar">Scrollbar</a>&lt;'a&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.State-5" class="associatedtype trait-impl"><a class="src rightside" href="../../src/ratatui/widgets/scrollbar.rs.html#500">Source</a><a href="#associatedtype.State-5" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.State" class="associatedtype">State</a> = <a class="struct" href="struct.ScrollbarState.html" title="struct ratatui::widgets::ScrollbarState">ScrollbarState</a></h4></section></div></details></div><script src="../../trait.impl/ratatui/widgets/trait.StatefulWidget.js" async></script></section></div></main></body></html>